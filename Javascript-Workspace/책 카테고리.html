<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>책 카테고리 선택</title>
    <style>
        fieldset{
            width: 700px;
        }
        #inner {
            width: 90%;
            text-align: right;
        }
        #result {
            width: 100%;
            height: 300px;
            border: 1px solid red;
        }
    </style>
</head>
<body>
    <h1>Practice1</h1>
    
    <fieldset>
        <legend>취미</legend>
        <div id="inner">
            <input type="checkbox" name="all" id="all" value="전체선택" onclick="selectAll();">
            <label for="all">전체선택</label>
            <input type="checkbox" name="hobby" id="contain" value="종합">
            <label for="contain">종합</label>
            <input type="checkbox" name="hobby" id="novel" value="소설">
            <label for="novel">소설</label>
            <input type="checkbox" name="hobby" id="poem" value="시/에세이">
            <label for="poem">시/에세이</label>
            <input type="checkbox" name="hobby" id="econ" value="경제/경영" >
            <label for="econ">경제/경영</label>
            <input type="checkbox" name="hobby" id="self" value="자기계발">
            <label for="self">자기계발</label>
            <input type="checkbox" name="hobby" id="kind" value="아동">
            <label for="kind">아동</label> <br>
            <input type="checkbox" name="hobby" id="reise" value="여행">
            <label for="reis">여행</label>
            <input type="checkbox" name="hobby" id="science" value="과학">
            <label for="science">과학</label>
            <input type="checkbox" name="hobby" id="history" value="역사/문화">
            <label for="history">역사/문화</label>
            <input type="checkbox" name="hobby" id="fremd" value="외국어">
            <label for="fremd">외국어 &nbsp;&nbsp;&nbsp;</label>
            <input type="checkbox" name="hobby" id="computer" value="컴퓨터">
            <label for="computer">컴퓨터&nbsp;&nbsp;&nbsp;</label>
            <input type="checkbox" name="hobby" id="comic" value="만화">
            <label for="comic">만화</label>
        </div>
        </fieldset>
        <br>

        <button onclick="category();">카테고리 선택</button>
        <div id="result"></div>
        <script>
            function category() {
                // 내가 선택한(checked) 체크박스의 value값들을 아이디값이 result인 div요소의 
                // 안쪽(innerHTML)에 출력
                let result = document.getElementById("result");
                let hobby = document.querySelectorAll("input[name=hobby]:checked");

                // for(let h of hobby){
                //     result.innerHTML += h.value+"&nbsp;";
                // }

                hobby.forEach(function(item, index, array){
                    result.innerHTML += item.value+" ";
                })
            }

            function selectAll(){
                let hobby = document.getElementsByName("hobby");
                let checked = document.getElementById("all").checked; // true oder false

                for(let i = 0; i<hobby.length; i++){
                    hobby[i].checked = checked;
                }
                // if(checked){
                //     for(let i=0; i<hobby.length; i++){
                //         hobby[i].checked = true;
                //     }
                // }else {
                //     for(let i=0; i<hobby.length; i++){
                //         hobby[i].checked = false;
                //     }
                // }
            }

            let hobbys = document.getElementsByName("hobby");
            for(let i=0; i<hobbys.length; i++){
                hobbys[i].onclick = function() {
                    let hobbyLength = document.querySelectorAll("input[name=hobby]:checked").length;
                    // 선택된 체크박스의 길이 == 전체 체크박스의 길이
                    if(hobbyLength == hobbys.length) {
                        document.getElementById("all").checked = true;
                    }else {
                        document.getElementById("all").checked = false;
                    }
                }
            }
        </script>
</body>
</html>